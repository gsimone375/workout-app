<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piano di Allenamento</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Piano di Allenamento</h1>
        </header>

        <nav class="tab-navigation">
            <button class="tab-btn active" data-tab="A">A</button>
            <button class="tab-btn" data-tab="B">B</button>
            <button class="tab-btn" data-tab="C">C</button>
            <button class="tab-btn" data-tab="D">D</button>
            <button class="tab-btn" data-tab="cronologia">Cronologia</button>
        </nav>

        <!-- Tab A -->
        <div class="tab-content active" id="tab-A">
            <div class="day-header">
                <h2>Giorno A - Petto-Dorso-Bicipiti-Addome</h2>
                <div class="date-section">
                    <label for="date-A">Data allenamento:</label>
                    <input type="date" id="date-A" class="form-control">
                </div>
            </div>
            <div class="table-container">
                <table class="workout-table" id="table-A">
                    <thead>
                        <tr>
                            <th>Esercizio</th>
                            <th>Serie/Reps</th>
                            <th>Peso partenza</th>
                            <th>Peso usato</th>
                            <th>Serie effettive</th>
                            <th>Note esercizio</th>
                            <th>Recupero(s)</th>
                            <th>Note personali</th>
                        </tr>
                    </thead>
                    <tbody id="tbody-A"></tbody>
                </table>
            </div>
            <div class="action-buttons">
                <button class="btn btn--primary" onclick="saveDay('A')">Salva Giorno</button>
                <button class="btn btn--outline" onclick="exportPDF('A')">Export PDF</button>
                <button class="btn btn--outline" onclick="exportExcel('A')">Export Excel</button>
            </div>
        </div>

        <!-- Tab B -->
        <div class="tab-content" id="tab-B">
            <div class="day-header">
                <h2>Giorno B - Gambe-Spalle-Trapezio inferiore-Tricipiti-Erettori spinali</h2>
                <div class="date-section">
                    <label for="date-B">Data allenamento:</label>
                    <input type="date" id="date-B" class="form-control">
                </div>
            </div>
            <div class="table-container">
                <table class="workout-table" id="table-B">
                    <thead>
                        <tr>
                            <th>Esercizio</th>
                            <th>Serie/Reps</th>
                            <th>Peso partenza</th>
                            <th>Peso usato</th>
                            <th>Serie effettive</th>
                            <th>Note esercizio</th>
                            <th>Recupero(s)</th>
                            <th>Note personali</th>
                        </tr>
                    </thead>
                    <tbody id="tbody-B"></tbody>
                </table>
            </div>
            <div class="action-buttons">
                <button class="btn btn--primary" onclick="saveDay('B')">Salva Giorno</button>
                <button class="btn btn--outline" onclick="exportPDF('B')">Export PDF</button>
                <button class="btn btn--outline" onclick="exportExcel('B')">Export Excel</button>
            </div>
        </div>

        <!-- Tab C -->
        <div class="tab-content" id="tab-C">
            <div class="day-header">
                <h2>Giorno C - Dorso-Petto-Bicipiti-Addome</h2>
                <div class="date-section">
                    <label for="date-C">Data allenamento:</label>
                    <input type="date" id="date-C" class="form-control">
                </div>
            </div>
            <div class="table-container">
                <table class="workout-table" id="table-C">
                    <thead>
                        <tr>
                            <th>Esercizio</th>
                            <th>Serie/Reps</th>
                            <th>Peso partenza</th>
                            <th>Peso usato</th>
                            <th>Serie effettive</th>
                            <th>Note esercizio</th>
                            <th>Recupero(s)</th>
                            <th>Note personali</th>
                        </tr>
                    </thead>
                    <tbody id="tbody-C"></tbody>
                </table>
            </div>
            <div class="action-buttons">
                <button class="btn btn--primary" onclick="saveDay('C')">Salva Giorno</button>
                <button class="btn btn--outline" onclick="exportPDF('C')">Export PDF</button>
                <button class="btn btn--outline" onclick="exportExcel('C')">Export Excel</button>
            </div>
        </div>

        <!-- Tab D -->
        <div class="tab-content" id="tab-D">
            <div class="day-header">
                <h2>Giorno D - Spalle-Tricipiti-Gambe</h2>
                <div class="date-section">
                    <label for="date-D">Data allenamento:</label>
                    <input type="date" id="date-D" class="form-control">
                </div>
            </div>
            <div class="table-container">
                <table class="workout-table" id="table-D">
                    <thead>
                        <tr>
                            <th>Esercizio</th>
                            <th>Serie/Reps</th>
                            <th>Peso partenza</th>
                            <th>Peso usato</th>
                            <th>Serie effettive</th>
                            <th>Note esercizio</th>
                            <th>Recupero(s)</th>
                            <th>Note personali</th>
                        </tr>
                    </thead>
                    <tbody id="tbody-D"></tbody>
                </table>
            </div>
            <div class="action-buttons">
                <button class="btn btn--primary" onclick="saveDay('D')">Salva Giorno</button>
                <button class="btn btn--outline" onclick="exportPDF('D')">Export PDF</button>
                <button class="btn btn--outline" onclick="exportExcel('D')">Export Excel</button>
            </div>
        </div>

        <!-- Tab Cronologia -->
        <div class="tab-content" id="tab-cronologia">
            <div class="cronologia-header">
                <h2>Cronologia Allenamenti</h2>
                <div class="cronologia-actions">
                    <button class="btn btn--primary" onclick="exportHistoryExcel()">Export Cronologia Excel</button>
                    <button class="btn btn--secondary" onclick="exportBackup()">Backup JSON</button>
                    <button class="btn btn--secondary" onclick="importBackup()">Ripristina Backup</button>
                </div>
            </div>
            <div class="history-list" id="history-list">
                <p class="no-history">Nessun allenamento salvato ancora.</p>
            </div>
        </div>
    </div>

    <!-- Modal di conferma eliminazione -->
    <div class="modal hidden" id="deleteModal">
        <div class="modal-content">
            <h3>Conferma eliminazione</h3>
            <p>Sei sicuro di voler eliminare questo allenamento?</p>
            <div class="modal-actions">
                <button class="btn btn--secondary" onclick="closeDeleteModal()">Annulla</button>
                <button class="btn btn--primary" onclick="confirmDelete()">Elimina</button>
            </div>
        </div>
    </div>

    <!-- Input nascosto per backup -->
    <input type="file" id="backupInput" accept=".json" style="display: none;" onchange="handleBackupRestore(event)">

    <script src="app.js"></script>
</body>
</html>